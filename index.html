<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>siteB</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <style>
        :root {
            --brand-color: #1d4ed8;
            --brand-dark: #1e40af;
            --brand-light: #eff6ff;
            --text-dark: #111827;
            --text-gray: #6b7280;
            --border: #e5e7eb;
            --bg-gray: #f9fafb;
            --danger: #ef4444;
            --active-shadow: 0 10px 15px -3px rgba(29, 78, 216, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Pretendard', sans-serif;
            color: var(--text-dark);
            background: #fff;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        .hidden { display: none !important; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }

        header {
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
            background: #fff;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 22px;
            font-weight: 800;
            color: var(--brand-color);
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-links { display: flex; gap: 30px; font-size: 14px; font-weight: 600; color: var(--text-gray); }
        .nav-links div { cursor: pointer; user-select: none; transition: color 0.2s; }
        .nav-links div.active { color: var(--brand-color); }

        .main-content { padding: 40px 0; }
        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: start;
        }

        .product-image-area img {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        .badge-group { display: flex; gap: 6px; margin-bottom: 12px; }
        .badge { font-size: 11px; font-weight: 800; padding: 3px 8px; border-radius: 4px; }
        .badge-blue { background: var(--brand-color); color: #fff; }
        .badge-gray { background: #f3f4f6; color: #6b7280; }

        .product-title { font-size: 32px; font-weight: 800; margin-bottom: 8px; letter-spacing: -1px; }
        .rating { display: flex; align-items: center; gap: 4px; font-size: 14px; margin-bottom: 24px; }
        .rating .stars { color: #3b82f6; }

        .delivery-notice {
            background: var(--brand-light);
            padding: 16px;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 30px;
            border: 1px solid #bfdbfe;
        }
        .delivery-notice b { color: var(--brand-color); }

        .options-section { margin-top: 40px; }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .opt-card {
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            background: #fff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 180px;
            user-select: none;
        }

        .badge-rec {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--brand-color);
            color: #fff;
            font-size: 10px;
            font-weight: 800;
            padding: 2px 10px;
            border-radius: 20px;
            white-space: nowrap;
        }

        .opt-card.selected {
            border: 2px solid var(--brand-color);
            background: var(--brand-light);
            box-shadow: var(--active-shadow);
        }

        .opt-card .check-mark {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid var(--border);
            display: flex; align-items: center; justify-content: center;
            background: #fff; color: transparent; font-size: 10px;
        }

        .opt-card.selected .check-mark {
            background: var(--brand-color);
            border-color: var(--brand-color);
            color: #fff;
        }

        .opt-card h4 { font-size: 15px; font-weight: 700; margin-bottom: 6px; }
        .opt-card .price { font-size: 19px; font-weight: 800; }
        .opt-card .sub-text { font-size: 12px; color: var(--text-gray); margin-top: 10px; line-height: 1.4; }

        .btn-buy {
            width: 100%;
            background: var(--brand-color);
            color: #fff;
            padding: 18px;
            border-radius: 8px;
            font-size: 17px;
            font-weight: 700;
            border: none;
            cursor: pointer;
        }

        #page-mypage { padding: 60px 0; }
        .mypage-header { font-size: 24px; font-weight: 800; margin-bottom: 30px; }

        .subscription-status {
            border: 1px solid var(--border);
            padding: 30px;
            border-radius: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fff;
        }
        .status-info h3 { font-size: 19px; font-weight: 700; margin-bottom: 6px; }
        .status-info p { color: var(--text-gray); font-size: 14px; }

        .btn-cancel {
            background: var(--bg-gray);
            border: 1px solid var(--border);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 13px;
            color: var(--text-gray);
            cursor: pointer;
        }

        .dialog-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex; align-items: center; justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }
        .dialog {
            background: #fff;
            padding: 32px;
            border-radius: 20px;
            width: 500px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            position: relative;
        }
        .dialog h3 { font-size: 20px; font-weight: 800; margin-bottom: 16px; color: var(--text-dark); }
        .dialog p.scroll-text {
            font-size: 12px;
            color: #888;
            margin-bottom: 18px;
            text-align: left;
            background: #fafafa;
            padding: 15px;
            border-radius: 8px;
            height: 140px;
            overflow-y: scroll;
            border: 1px solid var(--border);
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .dialog-btns { display: flex; flex-direction: column; gap: 10px; }
        .btn-keep { background: var(--brand-color); color: #fff; padding: 16px; border-radius: 8px; border: none; font-weight: 700; cursor: pointer; font-size: 16px; }
        .btn-next { background: transparent; color: #d1d5db; padding: 10px; border: none; font-size: 11px; cursor: pointer; text-decoration: underline; margin-top: 5px; }

        .evil-checkbox-area { text-align: left; padding: 15px; background: #fdfdfd; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border); }
        .evil-checkbox-area label { display: flex; align-items: flex-start; gap: 10px; font-size: 12px; cursor: pointer; margin-bottom: 8px; color: #4b5563; }
        .check-all-wrapper { display: flex; align-items: center; gap: 8px; padding-bottom: 12px; margin-bottom: 12px; border-bottom: 1px solid var(--border); font-weight: 800; font-size: 14px; color: var(--text-dark); }

        #toast {
            position: fixed;
            bottom: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(17, 24, 39, 0.95); color: #fff; padding: 14px 28px; border-radius: 50px;
            opacity: 0; transition: 0.3s; z-index: 3000; font-size: 14px; font-weight: 600;
        }

        /* ===== ê³ ê°ì„¼í„° í˜ì´ì§€ ===== */
        #page-support { padding: 60px 0; }
        .support-title { font-size: 24px; font-weight: 800; margin-bottom: 18px; }
        .support-card {
            border: 1px solid var(--border);
            padding: 30px;
            border-radius: 16px;
            background: #fff;
        }
        .support-card h3 { font-size: 18px; font-weight: 800; margin-bottom: 8px; }
        .support-card p { font-size: 14px; color: var(--text-gray); line-height: 1.7; }
        .support-actions { margin-top: 18px; display: flex; flex-direction: column; gap: 10px; max-width: 360px; }
        .btn-support-primary {
            background: var(--brand-color);
            color: #fff;
            padding: 14px 16px;
            border-radius: 10px;
            border: none;
            font-weight: 800;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-support-secondary {
            background: var(--bg-gray);
            border: 1px solid var(--border);
            padding: 12px 16px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            color: var(--text-gray);
            font-size: 13px;
        }
        .support-verified {
            margin-top: 18px;
            padding: 14px;
            border-radius: 12px;
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #166534;
            font-size: 13px;
            font-weight: 800;
        }

        .mini-input {
            width: 100%;
            padding: 14px 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            outline: none;
        }
        .mini-input:focus { border-color: #93c5fd; box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.12); }

        /* ===== ì¶”ê°€ ì˜µì…˜ í•´ì§€ ì•ˆë‚´ íŒì—…(ì˜µì…˜ ì„ íƒ ì‹œì ) ===== */
        .dialog-close-x {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 34px;
            height: 34px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: #fff;
            cursor: pointer;
            color: #9ca3af;
            font-weight: 900;
            line-height: 1;
        }
        .dialog-close-x:hover { color: #6b7280; }

        /* === [ìˆ˜ì •] ì•ˆë‚´ íŒì—… í…ìŠ¤íŠ¸ë¥¼ ë” ì»´íŒ©íŠ¸í•˜ê²Œ === */
        .guide-scroll {
            text-align: left;
            background: #fafafa;
            border: 1px solid var(--border);
            border-radius: 12px;

            padding: 14px;
            height: 240px;
            overflow-y: auto;
            white-space: pre-wrap;

            line-height: 1.35;
            font-size: 12px;
            color: #6b7280;
        }
        .guide-scroll::-webkit-scrollbar { width: 0; height: 0; }
        .guide-scroll { scrollbar-width: none; -ms-overflow-style: none; }

        .guide-inline-btn {
            margin-top: 14px;
            width: 100%;
            background: var(--brand-color);
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 14px 16px;
            font-weight: 800;
            cursor: pointer;
            font-size: 14px;
        }
        .guide-inline-sub {
            margin-top: 10px;
            text-align: center;
            font-size: 12px;
            color: #cbd5e1;
            text-decoration: underline;
            cursor: pointer;
        }

        .guide-divider {
            height: 1px;
            background: var(--border);
            margin: 10px 0;
        }

        .guide-spacer { height: 140px; }
    </style>
</head>
<body>

<header>
    <div class="container header-inner">
        <div class="logo" onclick="showPage('main')">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
            siteB
        </div>
        <div class="nav-links">
            <div id="nav-main" class="active" onclick="showPage('main')">ì „ì²´ ìƒí’ˆ</div>
            <div id="nav-mypage" onclick="showPage('mypage')">ë§ˆì´í˜ì´ì§€</div>
        </div>
        <div style="width: 24px;"></div>
    </div>
</header>

<main id="page-main" class="container main-content">
    <div class="product-grid">
        <div class="product-image-area">
            <img src="sample.png" alt="product">
        </div>
        <div class="product-info-area">
            <div class="badge-group">
                <span class="badge badge-blue">PREMIUM</span>
                <span class="badge badge-gray">LIMITED</span>
            </div>
            <h1 class="product-title">ì—‘ìŠ¤í¼íŠ¸ ì—ë„ˆì§€ ì†”ë£¨ì…˜</h1>
            <div class="rating">
                <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
                <span class="count">5.0 | ë§Œì¡±ë„ 100%</span>
            </div>
            <div class="delivery-notice">
                âš¡ <b>í”„ë¦¬ë¯¸ì—„ ë¡œì¼“ ë°°ì†¡</b> (ì§€ê¸ˆ ì£¼ë¬¸ ì‹œ ì˜¤ëŠ˜ ì¶œë°œ)
            </div>
            <p style="color: var(--text-gray); font-size: 15px; margin-bottom: 40px; line-height: 1.7;">
                ì—…ê³„ ìµœê³ ì˜ ì„±ë¶„ í•¨ëŸ‰. ì „ë‹´ ì¼€ì–´ ì„œë¹„ìŠ¤ í¬í•¨. <br>
                <b>siteB í”„ë¦¬ë¯¸ì—„ ìœ ì € ë©¤ë²„ì‹­</b> í˜œíƒì´ ëª¨ë“  ê²°ì œì— ê¸°ë³¸ í¬í•¨ë©ë‹ˆë‹¤.
            </p>

            <div class="options-section">
                <div class="options-grid">
                    <div class="opt-card" id="opt-1" onclick="selectOption(1)">
                        <div class="check-mark">âœ“</div>
                        <div>
                            <h4>ê°œë³„ êµ¬ë§¤</h4>
                            <div class="price">22,000ì›</div>
                        </div>
                    </div>
                    <div class="opt-card selected" id="opt-2" onclick="selectOption(2)">
                        <div class="badge-rec">ë² ìŠ¤íŠ¸</div>
                        <div class="check-mark">âœ“</div>
                        <div>
                            <h4>ì •ê¸° êµ¬ë…</h4>
                            <div class="price">19,900ì›</div>
                        </div>
                    </div>
                    <div class="opt-card" id="opt-3" onclick="selectOption(3)">
                        <div class="check-mark">âœ“</div>
                        <div>
                            <h4>ë§ˆìŠ¤í„° íŒ¨í‚¤ì§€</h4>
                            <div class="price">17,500ì›</div>
                        </div>
                    </div>
                </div>

                <button class="btn-buy" onclick="handlePurchase()">í˜œíƒ ë°›ê³  ê²°ì œí•˜ê¸°</button>
            </div>
        </div>
    </div>
</main>

<main id="page-mypage" class="container hidden">
    <h2 class="mypage-header">ë§ˆì´í˜ì´ì§€</h2>

    <div id="sub-empty" class="subscription-status">
        <div class="status-info">
            <h3>ê°€ì…ëœ ë©¤ë²„ì‹­ì´ ì—†ìŠµë‹ˆë‹¤.</h3>
            <p>í”„ë¦¬ë¯¸ì—„ ìƒí’ˆì„ êµ¬ë§¤í•˜ê³  ì°¨ë³„í™”ëœ í˜œíƒì„ ëˆ„ë ¤ë³´ì„¸ìš”.</p>
        </div>
        <button class="btn-cancel" onclick="showPage('main')">ìƒí’ˆ ë³´ëŸ¬ê°€ê¸°</button>
    </div>

    <div id="sub-active" class="subscription-status hidden">
        <div class="status-info">
            <p style="color: var(--brand-color); font-weight: 700; font-size: 12px; margin-bottom: 5px;">ACTIVE</p>
            <h3>siteB í”„ë¦¬ë¯¸ì—„ ìœ ì € ë©¤ë²„ì‹­</h3>
            <p>ë‹¤ìŒ ê°±ì‹ ì¼: 2026ë…„ 01ì›” 22ì¼ (ì •ê¸° ê²°ì œ ì˜ˆì •)</p>
        </div>
        <button class="btn-cancel" onclick="startCancelLoop()">ë©¤ë²„ì‹­ ê´€ë¦¬</button>
    </div>

    <div class="subscription-status" style="margin-top: 18px;">
        <div class="status-info">
            <h3>ëˆ„ì  ê²°ì œ ê¸ˆì•¡</h3>
            <p id="total-paid">0ì›</p>
        </div>
        <div style="width: 1px;"></div>
    </div>
</main>

<main id="page-support" class="container hidden">
    <h2 class="support-title">ê³ ê°ì„¼í„°</h2>
    <div class="support-card">
        <h3>ë³¸ì¸ í™•ì¸ ì•ˆë‚´</h3>
        <p>
            ë©¤ë²„ì‹­ í•´ì§€ë¥¼ ì™„ë£Œí•˜ë ¤ë©´ ì „í™”ë²ˆí˜¸ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.<br>
            ì•„ë˜ ì ˆì°¨ë¥¼ ì§„í–‰í•˜ì‹œë©´ í•´ì§€ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
        </p>

        <div class="support-actions">
            <button class="btn-support-primary" onclick="openPhoneVerify()">ì „í™”ë²ˆí˜¸ ì¸ì¦ ì§„í–‰</button>
            <button class="btn-support-secondary" onclick="showPage('mypage')">ë§ˆì´í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>

        <div id="support-verified" class="support-verified hidden">
            ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ë©¤ë²„ì‹­ í•´ì§€ë¥¼ ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            <div style="margin-top: 12px;">
                <button class="btn-support-primary" onclick="finalizeCancel()">ë©¤ë²„ì‹­ í•´ì§€ ì™„ë£Œ</button>
            </div>
        </div>
    </div>
</main>

<div id="cancel-overlay" class="dialog-overlay hidden">
    <div id="step-1" class="dialog">
        <h3>í•´ì§€ ì‹ ì²­ ì „ ìœ ì˜ì‚¬í•­</h3>
        <p class="scroll-text">
ì œ 1ì¡° [í•´ì§€ íš¨ë ¥] í•´ì§€ ì‹ ì²­ ì‹œ ì¦‰ì‹œ ëª¨ë“  ë©¤ë²„ì‹­ í˜œíƒ(í• ì¸, ë°°ì†¡, ì ë¦½)ì€ ì •ì§€ë©ë‹ˆë‹¤.
ì œ 2ì¡° [í¬ì¸íŠ¸ í™˜ìˆ˜] ë©¤ë²„ì‹­ ê°€ì… ê¸°ê°„ ì¤‘ ë°œìƒí•œ ì¶”ê°€ ì ë¦½ê¸ˆ ë° ì¿ í°ì€ í•´ì§€ ì¦‰ì‹œ ì „ì•¡ ì†Œë©¸ë˜ë©° ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
ì œ 3ì¡° [ì¬ê°€ì… ì œí•œ] ì„œë¹„ìŠ¤ ë‚¨ìš© ë°©ì§€ë¥¼ ìœ„í•´ í•´ì§€ í›„ 180ì¼ê°„ í”„ë¡œëª¨ì…˜ ê°€ì…ì´ ì›ì²œ ì°¨ë‹¨ë©ë‹ˆë‹¤.
ì œ 4ì¡° [ê°œì¸ì •ë³´ ì²˜ë¦¬] ë¶€ì • ì´ìš© ë°©ì§€ ë° ì •ì‚° ì²˜ë¦¬ë¥¼ ìœ„í•´ ê²°ì œ ë°ì´í„°ëŠ” ë‚´ë¶€ ë°©ì¹¨ì— ë”°ë¼ ìµœì¥ 5ë…„ê°„ ë³´ê´€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì œ 5ì¡° [ì‚¬í›„ ìˆ˜ìˆ˜ë£Œ] ë©¤ë²„ì‹­ ì „ìš© íŠ¹ê°€ êµ¬ë§¤ ê±´ì— ëŒ€í•´ ì¼ë°˜ê°€ì™€ì˜ ì°¨ì•¡ì´ ìœ„ì•½ê¸ˆìœ¼ë¡œ ì²­êµ¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì œ 6ì¡° [ì—°ì† ê²°ì œ] ì´ë¯¸ ì²­êµ¬ ì ˆì°¨ê°€ ì§„í–‰ëœ ì •ê¸° ê²°ì œ ê±´ì— ëŒ€í•´ì„œëŠ” ë‹¹ì›” í™˜ë¶ˆì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì œ 7ì¡° [ì¿ í° íšŒìˆ˜] ë¯¸ì‚¬ìš©í•œ ë©¤ë²„ì‹­ ì „ìš© ì›°ì»´ ì¿ í°ì€ í•´ì§€ í™•ì • ì¦‰ì‹œ ë¬´íš¨ ì²˜ë¦¬ë©ë‹ˆë‹¤.
ì œ 8ì¡° [ë°ì´í„° ì‚­ì œ] ë§ì¶¤í˜• ê±´ê°• ì§„ë‹¨ ë°ì´í„° ë° ë¶„ì„ ë¦¬í¬íŠ¸ ì—´ëŒ ê¶Œí•œì´ ì¦‰ì‹œ íšŒìˆ˜ë©ë‹ˆë‹¤.
ì œ 9ì¡° [ê³ ê°ì§€ì›] ë©¤ë²„ì‹­ í•´ì§€ ê³ ê°ì€ VIP ì „ë‹´ ìƒë‹´ ì„¼í„° ì´ìš©ì´ ì œí•œë˜ë©° ì¼ë°˜ ìƒë‹´ ëŒ€ê¸°ì—´ë¡œ ë°°ì¹˜ë©ë‹ˆë‹¤.
ì œ 10ì¡° [ì œíœ´ í˜œíƒ] ì™¸ë¶€ ì œíœ´ì‚¬ë¥¼ í†µí•´ ì œê³µë°›ë˜ OTT, í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë“±ë„ ì¦‰ì‹œ ì—°ë™ í•´ì œë©ë‹ˆë‹¤.
        </p>

        <div class="evil-checkbox-area">
            <div class="check-all-wrapper">
                <input type="checkbox" id="check-all" onchange="toggleAll(this)">
                <label for="check-all">ì „ì²´ ì•½ê´€ ë° ìœ ì˜ì‚¬í•­ì— ëª¨ë‘ ë™ì˜í•©ë‹ˆë‹¤.</label>
            </div>
            <label><input type="checkbox" class="evil-chk" data-required="true" onchange="updateMasterCheck()"> (í•„ìˆ˜) ìœ„ì•½ê¸ˆ ë°œìƒ ê°€ëŠ¥ì„± ë° í¬ì¸íŠ¸ ì „ì•¡ ì†Œë©¸ì— ë™ì˜</label>
            <label><input type="checkbox" class="evil-chk" data-required="true" onchange="updateMasterCheck()"> (í•„ìˆ˜) í•´ì§€ ì¦‰ì‹œ ëª¨ë“  ìœ ë£Œ ì„œë¹„ìŠ¤ ì´ìš© ê¶Œí•œ ìƒì‹¤ ë™ì˜</label>
            <label><input type="checkbox" class="evil-chk" data-attack="true" onchange="updateMasterCheck()"> (ì„ íƒ) ë§ì¶¤í˜• ê±´ê°• ì •ë³´ ë° í”„ë¦¬ë¯¸ì—„ íŠ¹ê°€ ì•Œë¦¼ ìˆ˜ì‹  ë™ì˜</label>
            <label><input type="checkbox" class="evil-chk" data-attack="true" onchange="updateMasterCheck()"> (ì„ íƒ) ì œ3ì ë§ˆì¼€íŒ… ëŒ€í–‰ì‚¬ ê°œì¸ì •ë³´ ì œê³µ ë° í™œìš© ë™ì˜</label>
            <label><input type="checkbox" class="evil-chk" data-attack="true" onchange="updateMasterCheck()"> (ì„ íƒ) ì¥ê¸° ë¯¸ì ‘ì† ì‹œ ì„œë¹„ìŠ¤ ìœ ì§€ ì•ˆë‚´ ë¬¸ì ìˆ˜ì‹  ë™ì˜</label>
        </div>
        <div class="dialog-btns">
            <button class="btn-keep" onclick="closeCancel()">í˜œíƒ ìœ ì§€í•˜ê³  ê³„ì† ì´ìš©í•˜ê¸°</button>
            <button class="btn-next" onclick="validateStep1()">í•´ì§€ ê³„ì† ì§„í–‰</button>
        </div>
    </div>

    <div id="step-2" class="dialog hidden">
        <h3 style="color:var(--danger)">ì ê¹ë§Œìš”! ì •ë§ ë– ë‚˜ì‹œê² ì–´ìš”?</h3>
        <div style="background:#fff7ed; padding:20px; border-radius:12px; margin-bottom:20px; font-size:15px; border:1px solid #ffedd5; line-height:1.6; text-align: left;">
            ì§€ê¸ˆ ì·¨ì†Œí•˜ì‹œë©´ <b>ë§¤ë‹¬ ê²°ì œê¸ˆì•¡ì˜ 70%</b>ë¥¼ <br>í‰ìƒ í• ì¸ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ë‹¤ì‹œëŠ” ì–»ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. <br>
            <span style="font-size:12px; color:#9a3412;">(í˜„ì¬ê¹Œì§€ ì´ 43,275ëª…ì˜ ê³ ê° ë¶„ë“¤ì´ ë©¤ë²„ì‹­ í˜œíƒì„ ë°›ìœ¼ì…¨ìŠµë‹ˆë‹¤)</span>
        </div>
        <div class="dialog-btns">
            <button class="btn-keep" onclick="closeCancel()">70% í‰ìƒ í• ì¸ í˜œíƒ ë°›ê³  ìœ ì§€í•˜ê¸°</button>
            <button class="btn-next" onclick="nextStep(3)">í˜œíƒ í¬ê¸°í•˜ê³  ê³„ì† í•´ì§€</button>
        </div>
    </div>

    <div id="step-3" class="dialog hidden">
        <div style="font-size: 40px; margin-bottom: 15px;">ğŸ”’</div>
        <h3>ì‹œìŠ¤í…œ ë³´ì•ˆ ì¸ì¦ ì¤‘</h3>
        <p style="text-align: center; font-size:14px; color:#666; background:none; height:auto; padding:0;">
            í˜„ì¬ ë‹¤ìˆ˜ì˜ í•´ì§€ ìš”ì²­ìœ¼ë¡œ ì¸í•´ ì¸ì¦ íŠ¸ë˜í”½ì´ ì§‘ì¤‘ë˜ê³  ìˆìŠµë‹ˆë‹¤. <br>
            ì•ˆì „í•œ í•´ì§€ ì²˜ë¦¬ë¥¼ ìœ„í•´ <b>ê³ ê°ì„¼í„° ì¸ì¦</b> ì ˆì°¨ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
        </p>
        <div class="dialog-btns" style="margin-top:25px;">
            <button class="btn-keep" onclick="goSupport()">ê³ ê°ì„¼í„°ë¡œ ì´ë™í•˜ì—¬ ì¸ì¦</button>
            <button class="btn-next" onclick="resetCancel()">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </div>
</div>

<div id="upsell-overlay" class="dialog-overlay hidden">
    <div class="dialog">
        <h3>ì ê¹ë§Œìš”, ë” ë‚˜ì€ ì„ íƒì´ ìˆìŠµë‹ˆë‹¤</h3>
        <p style="font-size: 13px; color:#6b7280; line-height: 1.7; margin-bottom: 18px; text-align:left;">
            ì •ê¸° êµ¬ë…ì„ ì„ íƒí•˜ì‹œë©´ ê¸°ë³¸ í˜œíƒì´ í¬í•¨ë˜ê³ , ê´€ë¦¬ ì„œë¹„ìŠ¤ê°€ ì œê³µë©ë‹ˆë‹¤.<br>
            ê°€ëŠ¥í•œ ê²½ìš° <b>ì •ê¸° êµ¬ë…(ë² ìŠ¤íŠ¸)</b> ì„ íƒì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.
        </p>
        <div class="dialog-btns">
            <button class="btn-keep" onclick="confirmUpsellToSub()">ì •ê¸° êµ¬ë…ìœ¼ë¡œ ë³€ê²½í•˜ê¸°</button>
            <button class="btn-next" onclick="confirmUpsellKeepCurrent()">ê·¸ë˜ë„ ì´ ì˜µì…˜ìœ¼ë¡œ ì§„í–‰</button>
        </div>
    </div>
</div>

<div id="addon-guide-overlay" class="dialog-overlay hidden">
    <div class="dialog">
        <button class="dialog-close-x" onclick="closeAddonGuide()" aria-label="ë‹«ê¸°">âœ•</button>
        <h3>ì •ê¸° êµ¬ë… ì „ìš© í”„ë¦¬ë¯¸ì—„ ì•ˆë‚´</h3>

        <div class="guide-scroll" id="addon-guide-scroll">
            <div style="font-weight:900; color: var(--text-dark); margin-bottom:-80px; font-size:0px;">
            </div>
            <div style="font-weight:900; color: var(--text-dark); margin-bottom:-40px; font-size:13px;">
                ì˜¤ëŠ˜ë¶€í„° ë‹¬ë¼ì§€ëŠ” â€˜ì—‘ìŠ¤í¼íŠ¸ ì—ë„ˆì§€â€™ ì²´ê° ì¼€ì–´
            </div>
            <div>
                í•˜ë£¨ í•œ í¬ë¡œ ì‹œì‘í•˜ëŠ” í”„ë¦¬ë¯¸ì—„ ë£¨í‹´ì…ë‹ˆë‹¤.<br>
                ë°”ìœ ë‚ ì—ë„ <b style="color:var(--text-dark);">ì§‘ì¤‘ë ¥Â·ì»¨ë””ì…˜Â·ì—ë„ˆì§€ ë°¸ëŸ°ìŠ¤</b>ë¥¼ í•œ ë²ˆì— ëŒì–´ì˜¬ë¦¬ëŠ” ë“¯í•œ
                â€œì¦‰ì‹œ ì²´ê°í˜•â€ í¬ë®¬ëŸ¬ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

                <b style="color:var(--text-dark);">ì •ê¸° êµ¬ë…</b>ì„ ì„ íƒí•˜ì‹œë©´<br>
                - ë§¤ë‹¬ ìµœì  íƒ€ì´ë°ì— ë§ì¶° ìë™ ë°°ì†¡ë©ë‹ˆë‹¤.
                - ê´€ë¦¬ ì„œë¹„ìŠ¤ê°€ ê¸°ë³¸ í¬í•¨ë˜ì–´ ë£¨í‹´ì´ ëŠê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.
                - í”„ë¦¬ë¯¸ì—„ ìœ ì € ì „ìš© í˜œíƒì´ ìë™ ì ìš©ë©ë‹ˆë‹¤.<br><br>

                ì§€ê¸ˆ ì‹œì‘í•œ ê³ ê°ë“¤ì€ â€œì•„ì¹¨ì´ ë‹¤ë¥´ë‹¤â€, â€œí”¼ë¡œê°€ ëœ ìŒ“ì¸ë‹¤â€,<br>
                â€œí•˜ë£¨ê°€ ë” ê¸¸ì–´ì¡Œë‹¤â€ëŠ” í›„ê¸°ë¥¼ ë‚¨ê¸°ê³  ìˆìŠµë‹ˆë‹¤.<br>
                ì •ê¸° êµ¬ë…ìœ¼ë¡œ <b style="color:var(--text-dark);">ìµœìƒì˜ ì»¨ë””ì…˜ íë¦„</b>ì„ ìœ ì§€í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.
            </div>

            <div class="guide-divider"></div>

            <div style="font-weight:900; color: var(--text-dark); margin-bottom:0px; font-size:13px;">
                ì¶”ê°€ ì˜µì…˜ í•´ì§€ ì ˆì°¨
            </div>
            <div>
                1) ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ í•´ì§€ ì•ˆë‚´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.<br>
                2) í•„ìˆ˜ í™•ì¸ í•­ëª©(2ê°œ)ì— ì²´í¬í•©ë‹ˆë‹¤.<br>
                3) ë§ˆì§€ë§‰ ì…ë ¥ì¹¸ì— â€˜í•´ì œâ€™ë¼ê³  ì •í™•íˆ ì…ë ¥í•˜ë©´ í•´ì§€ê°€ ì™„ë£Œë©ë‹ˆë‹¤.<br><br>

                <b style="color: var(--text-dark);">ìœ ì˜ì‚¬í•­</b><br>
                - í•´ì§€ ì™„ë£Œ í›„ì—ëŠ” ì¶”ê°€ ì˜µì…˜ ë¹„ìš©ì´ ë” ì´ìƒ í•©ì‚°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
                - ì˜¤ì…ë ¥ ì‹œ í•´ì§€ê°€ ì§„í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
                - í•´ì§€ëŠ” ë©¤ë²„ì‹­(ì •ê¸° êµ¬ë…) í•´ì§€ì™€ ë³„ê°œë¡œ ë™ì‘í•©ë‹ˆë‹¤.<br>
            </div>

            <button class="guide-inline-btn" onclick="startAddonRemovalFromGuide()">ì¶”ê°€ ì˜µì…˜ í•´ì§€ ì ˆì°¨ ì‹œì‘</button>
            <div class="guide-inline-sub" onclick="closeAddonGuide()">ë‚˜ì¤‘ì— ë³´ê¸°</div>
        </div>
    </div>
</div>

<div id="addon-overlay" class="dialog-overlay hidden">
    <div id="addon-step-1" class="dialog">
        <h3>ì¶”ê°€ ì˜µì…˜ í•´ì œ ì „ í™•ì¸</h3>
        <p class="scroll-text">
ì¶”ê°€ ì˜µì…˜ì€ ì •ê¸° êµ¬ë… ê³ ê° ì „ìš©ìœ¼ë¡œ ì œê³µë˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
í•´ì œ ì‹œ ì¼ë¶€ ì•ˆë‚´ ë° ì§€ì› ë²”ìœ„ê°€ ì œí•œë  ìˆ˜ ìˆìœ¼ë©°, í•´ì œ ì´í›„ ë™ì¼ ì¡°ê±´ìœ¼ë¡œ ì¬ì ìš©ì´ ì§€ì—°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•´ì œë¥¼ ì§„í–‰í•˜ë ¤ë©´ ì•„ë˜ í™•ì¸ ì ˆì°¨ë¥¼ ì™„ë£Œí•´ì•¼ í•©ë‹ˆë‹¤.
        </p>

        <div class="evil-checkbox-area">
            <div class="check-all-wrapper" style="border-bottom:none; margin-bottom: 0; padding-bottom: 0;">
                <span style="font-size: 14px;">í•´ì œ í™•ì¸ ì²´í¬</span>
            </div>
            <label><input type="checkbox" id="addon-chk-1"> (í•„ìˆ˜) í•´ì œ ì‹œ í˜œíƒ ì¼ë¶€ ì œí•œ ê°€ëŠ¥ì„±ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤</label>
            <label><input type="checkbox" id="addon-chk-2"> (í•„ìˆ˜) í•´ì œ í›„ ì¬ì ìš©ì´ ì§€ì—°ë  ìˆ˜ ìˆìŒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤</label>
            <label><input type="checkbox" id="addon-chk-3"> (ì„ íƒ) í•´ì œ ê´€ë ¨ ì•ˆë‚´ë¥¼ ë¬¸ìë¡œ ë°›ê² ìŠµë‹ˆë‹¤</label>
        </div>

        <div class="dialog-btns">
            <button class="btn-keep" onclick="goAddonStep2()">í•´ì œ ê³„ì† ì§„í–‰</button>
            <button class="btn-next" onclick="closeAddonOverlay()">ê·¸ëƒ¥ ìœ ì§€í•˜ê¸°</button>
        </div>
    </div>

    <div id="addon-step-2" class="dialog hidden">
        <h3 style="color: var(--danger);">ë§ˆì§€ë§‰ í™•ì¸</h3>
        <p style="font-size: 13px; color:#6b7280; line-height: 1.7; margin-bottom: 14px; text-align:left;">
            í•´ì œë¥¼ ì™„ë£Œí•˜ë ¤ë©´ ì•„ë˜ ì…ë ¥ì¹¸ì— <b>í•´ì œ</b>ë¼ê³  ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.
        </p>
        <input id="addon-confirm-text" class="mini-input" placeholder="ì—¬ê¸°ì— 'í•´ì œ' ì…ë ¥" autocomplete="off" />
        <div class="dialog-btns" style="margin-top: 14px;">
            <button class="btn-keep" onclick="confirmAddonRemoval()">í•´ì œ ì™„ë£Œ</button>
            <button class="btn-next" onclick="closeAddonOverlay()">ì·¨ì†Œ</button>
        </div>
    </div>
</div>

<div id="phone-overlay" class="dialog-overlay hidden">
    <div class="dialog">
        <h3>ì „í™”ë²ˆí˜¸ ì¸ì¦</h3>
        <p style="font-size: 13px; color:#6b7280; line-height: 1.7; margin-bottom: 14px; text-align:left;">
            í•´ì§€ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ì¸ì¦ì„ ì§„í–‰í•´ ì£¼ì„¸ìš”.
        </p>
        <input id="phone-input" class="mini-input" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥(ìˆ«ìë§Œ)" inputmode="numeric" autocomplete="off" />
        <div class="dialog-btns" style="margin-top: 14px;">
            <button class="btn-keep" onclick="verifyPhone()">ì¸ì¦í•˜ê¸°</button>
            <button class="btn-next" onclick="closePhoneVerify()">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<div id="toast"></div>

<script>
    // ===== ìƒˆë¡œê³ ì¹¨ ì‹œ ì´ˆê¸°í™”: ì €ì¥ì†Œ(localStorage/sessionStorage) ì‚¬ìš©í•˜ì§€ ì•ŠìŒ =====

    let isSubscribed = false;

    let selectedOption = 2;
    let pendingOptionAfterUpsell = null;

    // ì •ê¸° êµ¬ë…(2ë²ˆ) ê²°ì œ ì‹œ ìë™ í•©ì‚° ìƒíƒœ(ë©”ì¸ ë¹„ë…¸ì¶œ)
    let addonActive = true;

    // ë§ˆì§€ë§‰ êµ¬ë§¤ í”Œëœ
    let planPurchased = 2;

    // â€œëˆ„ì  ê²°ì œ ê¸ˆì•¡â€ í‘œì‹œê°’: ëˆ„ì í•˜ì§€ ì•Šê³  ë§ˆì§€ë§‰ ê²°ì œ ê¸ˆì•¡ë§Œ í‘œì‹œ
    let displayPaid = 0;

    // í•´ì§€ ì¸ì¦ ìƒíƒœ
    let cancelVerified = false;

    function formatWon(n) {
        try { return n.toLocaleString('ko-KR') + "ì›"; }
        catch(e) { return String(n) + "ì›"; }
    }

    function showPage(pageId) {
        document.getElementById('page-main').classList.add('hidden');
        document.getElementById('page-mypage').classList.add('hidden');
        document.getElementById('page-support').classList.add('hidden');

        const target = document.getElementById('page-' + pageId);
        if (target) target.classList.remove('hidden');

        document.getElementById('nav-main').classList.remove('active');
        document.getElementById('nav-mypage').classList.remove('active');

        if(pageId === 'main') document.getElementById('nav-main').classList.add('active');
        if(pageId === 'mypage') {
            document.getElementById('nav-mypage').classList.add('active');
            updateMypageUI();
        }
    }

    function updateMypageUI() {
        if(isSubscribed) {
            document.getElementById('sub-empty').classList.add('hidden');
            document.getElementById('sub-active').classList.remove('hidden');
        } else {
            document.getElementById('sub-empty').classList.remove('hidden');
            document.getElementById('sub-active').classList.add('hidden');
        }

        document.getElementById("total-paid").innerText = formatWon(displayPaid);
    }

    function actuallySelectOption(num) {
        selectedOption = num;
        document.querySelectorAll('.opt-card').forEach(card => card.classList.remove('selected'));
        document.getElementById('opt-' + num).classList.add('selected');
    }

    function selectOption(num) {
        if (num === 1 || num === 3) {
            pendingOptionAfterUpsell = num;
            openUpsellOverlay();
            return;
        }

        // 2ë²ˆì„ ì§ì ‘ í´ë¦­í–ˆì„ ë•Œë§Œ ì•ˆë‚´ íŒì—…ì„ ë„ì›€
        addonActive = true;
        actuallySelectOption(2);
        openAddonGuide();
    }

    function openUpsellOverlay() {
        document.getElementById("upsell-overlay").classList.remove("hidden");
    }
    function closeUpsellOverlay() {
        document.getElementById("upsell-overlay").classList.add("hidden");
    }

    // âœ… [ìˆ˜ì •] ì—…ì…€ì—ì„œ "ì •ê¸° êµ¬ë…ìœ¼ë¡œ ë³€ê²½í•˜ê¸°"ë¥¼ ëˆŒë €ì„ ë•ŒëŠ”
    // ì¶”ê°€ ì˜µì…˜ ì•ˆë‚´ì°½(openAddonGuide)ì„ ë„ìš°ì§€ ì•ŠìŒ
    function confirmUpsellToSub() {
        closeUpsellOverlay();
        addonActive = true;
        actuallySelectOption(2);
        showToast("ì •ê¸° êµ¬ë…(ë² ìŠ¤íŠ¸) ì˜µì…˜ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
        // openAddonGuide();  // ì œê±°
    }

    function confirmUpsellKeepCurrent() {
        const num = pendingOptionAfterUpsell || 1;
        closeUpsellOverlay();
        actuallySelectOption(num);
        showToast("ì„ íƒí•˜ì‹  ì˜µì…˜ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.");
    }

    function getSelectedPrice() {
        if (selectedOption === 1) return 22000;
        if (selectedOption === 2) return 19900;
        if (selectedOption === 3) return 17500;
        return 0;
    }

    function handlePurchase() {
        const base = getSelectedPrice();
        let extra = 0;

        // ì •ê¸° êµ¬ë…(2ë²ˆ)ë§Œ ìë™ í•©ì‚°(ë©”ì¸ ë¹„ë…¸ì¶œ)
        if (selectedOption === 2 && addonActive) extra = 1500;

        const paid = base + extra;
        displayPaid = paid;

        isSubscribed = true;
        planPurchased = selectedOption;

        showToast("ê²°ì œê°€ ì •ìƒ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        setTimeout(() => showPage('mypage'), 800);
    }

    function startCancelLoop() {
        cancelVerified = false;
        document.getElementById('support-verified').classList.add('hidden');

        const sb = document.querySelector("#step-1 .scroll-text");
        if (sb) sb.scrollTop = 0;

        document.getElementById('cancel-overlay').classList.remove('hidden');
        nextStep(1);
    }

    function nextStep(n) {
        document.querySelectorAll('#cancel-overlay .dialog').forEach(d => d.classList.add('hidden'));
        document.getElementById('step-' + n).classList.remove('hidden');
    }

    function closeCancel() {
        document.getElementById('cancel-overlay').classList.add('hidden');
        showToast("ë©¤ë²„ì‹­ í˜œíƒì´ ì •ìƒ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    function resetCancel() {
        showToast("ì„¸ì…˜ ë§Œë£Œë¡œ ì¸í•´ í•´ì§€ ì‹ ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
        nextStep(1);
        const sb = document.querySelector("#step-1 .scroll-text");
        if (sb) sb.scrollTop = 0;
    }

    function toggleAll(master) {
        const chks = document.querySelectorAll('.evil-chk');
        chks.forEach(chk => { chk.checked = master.checked; });
        updateMasterCheck();
    }

    function updateMasterCheck() {
        const master = document.getElementById('check-all');
        const chks = document.querySelectorAll('.evil-chk');
        const allChecked = Array.from(chks).every(c => c.checked);
        master.checked = allChecked;
    }

    function validateStep1() {
        const required = document.querySelectorAll('.evil-chk[data-required="true"]');
        let allRequiredChecked = true;
        required.forEach(chk => { if(!chk.checked) allRequiredChecked = false; });

        if(!allRequiredChecked) {
            showToast("ëª¨ë“  í•„ìˆ˜ ìœ ì˜ì‚¬í•­ì— ë™ì˜í•˜ì…”ì•¼ í•´ì§€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            return;
        }

        const attackChks = document.querySelectorAll('.evil-chk[data-attack="true"]');
        let anyAttackChecked = false;
        attackChks.forEach(chk => { if(chk.checked) anyAttackChecked = true; });

        if(anyAttackChecked) {
            for(let i=0; i<5; i++) {
                setTimeout(() => createAdBombNotice(), i * 120);
            }
        }
        nextStep(2);
    }

    function createAdBombNotice() {
        const ads = [
            { title: "ì´ˆíŠ¹ê°€ 99% ì¿ í°", body: "ì§€ê¸ˆ ë°”ë¡œ ë©¤ë²„ì‹­ ìœ ì§€í•˜ê³  ì „ìš© íŠ¹ê°€ë¥¼ í™•ì¸í•˜ì„¸ìš”!", code: "KEEP-HOT-DEAL" },
            { title: "ì˜¤ëŠ˜ë§Œ ë¬´ë£Œ ë°°ì†¡", body: "í•´ì§€ ì·¨ì†Œ ì‹œ ëª¨ë“  ìƒí’ˆì— ëŒ€í•´ ì¦‰ì‹œ í˜œíƒ ì ìš©!", code: "FREE-SHIP-NOW" },
            { title: "ì¹œêµ¬ ì´ˆëŒ€ 5ë§Œì ", body: "í•´ì§€ ëŒ€ì‹  ì¹œêµ¬ë¥¼ ì´ˆëŒ€í•˜ê³  í˜„ê¸ˆì²˜ëŸ¼ ì“°ëŠ” í¬ì¸íŠ¸ ë°›ê¸°!", code: "INVITE-V688" },
            { title: "VIP ì‹œí¬ë¦¿ ë°•ìŠ¤", body: "í•´ì§€ ìœ ë³´ ê³ ê°ë‹˜ê»˜ë§Œ ë“œë¦¬ëŠ” í•œì •íŒ êµ¿ì¦ˆ ë‹¹ì²¨!", code: "VIP-BOX-LUCKY" }
        ];
        const ad = ads[Math.floor(Math.random() * ads.length)];

        const div = document.createElement('div');
        div.className = 'bomb-notice';
        div.style.top = (Math.random() * 70 + 10) + '%';
        div.style.left = (Math.random() * 70 + 5) + '%';

        div.innerHTML = `
            <div class="ad-header">SPECIAL OFFER</div>
            <div class="ad-body">
                <h4>${ad.title}</h4>
                <p>${ad.body}</p>
                <span class="coupon-code">${ad.code}</span>
            </div>
            <div class="ad-footer">
                <button class="btn-close" onclick="this.closest('.bomb-notice').remove()">ë‹¤ìŒì— ë³´ê¸°</button>
                <button class="btn-claim" onclick="alert('ì˜¤ë¥˜ë¡œ ì¸í•´ ì¿ í° ì‚¬ìš©ì— ì‹¤íŒ¨í•˜ì…¨ìŠµë‹ˆë‹¤.'); this.closest('.bomb-notice').remove()">ì§€ê¸ˆ ë°›ê¸°</button>
            </div>
        `;
        document.body.appendChild(div);
    }

    function goSupport() {
        document.getElementById('cancel-overlay').classList.add('hidden');
        showToast("ê³ ê°ì„¼í„° ì¸ì¦ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
        showPage('support');
    }

    function openPhoneVerify() {
        document.getElementById("phone-overlay").classList.remove("hidden");
        document.getElementById("phone-input").value = "";
        setTimeout(() => document.getElementById("phone-input").focus(), 50);
    }

    function closePhoneVerify() {
        document.getElementById("phone-overlay").classList.add("hidden");
    }

    function verifyPhone() {
        const raw = (document.getElementById("phone-input").value || "").trim();
        const digits = raw.replace(/\D/g, "");

        if (digits.length < 10 || digits.length > 11) {
            showToast("ì „í™”ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
            return;
        }

        cancelVerified = true;
        closePhoneVerify();
        document.getElementById("support-verified").classList.remove('hidden');
        showToast("ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    function finalizeCancel() {
        if (!cancelVerified) {
            showToast("ì „í™”ë²ˆí˜¸ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return;
        }

        // ë©¤ë²„ì‹­ í•´ì§€ í›„ ëˆ„ì  ê²°ì œì•¡ 0ì›ìœ¼ë¡œ ë¦¬ì…‹
        isSubscribed = false;
        displayPaid = 0;

        showToast("ë©¤ë²„ì‹­ í•´ì§€ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
        showPage('mypage');
    }

    // ===== ì˜µì…˜ 2 í´ë¦­ ì‹œì : ì¶”ê°€ ì˜µì…˜ í•´ì§€ ì•ˆë‚´ íŒì—… =====
    function openAddonGuide() {
        const overlay = document.getElementById("addon-guide-overlay");
        const scrollBox = document.getElementById("addon-guide-scroll");
        if (scrollBox) scrollBox.scrollTop = 0;
        overlay.classList.remove("hidden");
    }
    function closeAddonGuide() {
        document.getElementById("addon-guide-overlay").classList.add("hidden");
    }
    function startAddonRemovalFromGuide() {
        closeAddonGuide();
        openAddonRemoval();
    }

    // ===== ì¶”ê°€ ì˜µì…˜ í•´ì œ ì ˆì°¨ =====
    function openAddonRemoval() {
        document.getElementById("addon-overlay").classList.remove("hidden");
        document.getElementById("addon-step-1").classList.remove("hidden");
        document.getElementById("addon-step-2").classList.add("hidden");

        document.getElementById("addon-chk-1").checked = false;
        document.getElementById("addon-chk-2").checked = false;
        document.getElementById("addon-chk-3").checked = false;
        document.getElementById("addon-confirm-text").value = "";
    }

    function closeAddonOverlay() {
        document.getElementById("addon-overlay").classList.add("hidden");
    }

    function goAddonStep2() {
        const c1 = document.getElementById("addon-chk-1").checked;
        const c2 = document.getElementById("addon-chk-2").checked;
        if (!c1 || !c2) {
            showToast("í•„ìˆ˜ í•­ëª©ì— ëª¨ë‘ ë™ì˜í•˜ì…”ì•¼ ì§„í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            return;
        }
        document.getElementById("addon-step-1").classList.add("hidden");
        document.getElementById("addon-step-2").classList.remove("hidden");
    }

    function confirmAddonRemoval() {
        const t = (document.getElementById("addon-confirm-text").value || "").trim();
        if (t !== "í•´ì œ") {
            showToast("ì •í™•íˆ 'í•´ì œ'ë¼ê³  ì…ë ¥í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.");
            return;
        }

        addonActive = false;
        closeAddonOverlay();
        showToast("ì¶”ê°€ ì˜µì…˜ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    function showToast(msg) {
        const toast = document.getElementById('toast');
        toast.innerText = msg;
        toast.style.opacity = '1';
        setTimeout(() => toast.style.opacity = '0', 2500);
    }

    (function init() {
        actuallySelectOption(2);
        updateMypageUI();
    })();
</script>
</body>
</html>
